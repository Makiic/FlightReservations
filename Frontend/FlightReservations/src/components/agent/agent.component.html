<div class="futuristic-flight-wrapper">
  <mat-card class="flight-card">
    <mat-card-title>Create Flight</mat-card-title>

    <form (submit)="createFlight($event)">

      <!-- Gradovi -->
      <div class="form-row">
        <mat-form-field appearance="fill">
          <mat-label>Departure</mat-label>
          <mat-select [(ngModel)]="departureCity" name="departureCity" required>
            <mat-option *ngFor="let c of cityOptions" [value]="c.value">
              {{ c.name }}
            </mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field appearance="fill">
          <mat-label>Arrival</mat-label>
          <mat-select [(ngModel)]="arrivalCity" name="arrivalCity" required>
            <mat-option *ngFor="let c of cityOptions" [value]="c.value">
              {{ c.name }}
            </mat-option>
          </mat-select>
        </mat-form-field>
      </div>

      <!-- Datum i layovers -->
      <div class="form-row">
        <mat-form-field appearance="fill">
          <mat-label>Date & Time</mat-label>
          <input
            matInput
            type="datetime-local"
            name="flightDate"
            [(ngModel)]="flightDateValue"
            [min]="minDateTime"
            required
            #dateInput="ngModel"
            (input)="dateError = ''"
          >
           </mat-form-field>
          <mat-error *ngIf="dateError">{{ dateError }}</mat-error>
       

        <mat-form-field appearance="fill">
          <mat-label>Layovers</mat-label>
          <input matInput type="number" name="layovers" min="0" required />
        </mat-form-field>
      </div>

      
      <div class="form-row">
        <mat-form-field appearance="fill">
          <mat-label>Total Seats</mat-label>
          <input matInput type="number" name="totalSeats" min="1" required />
        </mat-form-field>
      </div>

    
      <button mat-raised-button color="primary" type="submit">
        Create Flight
      </button>

      
      <p class="success-message" *ngIf="successMessage">{{ successMessage }}</p>
      <p class="error-message" *ngIf="errorMessage">{{ errorMessage }}</p>
    </form>
  </mat-card>

 
  <div class="flights-grid">
    <mat-card *ngFor="let f of flights" class="flight-item"
      [ngClass]="{'low-seats': f.availableSeats < 5, 'normal-seats': f.availableSeats >= 5}">
      <mat-card-title>
        {{ getCityName(f.departureCity) }} â†’ {{ getCityName(f.arrivalCity) }}
      </mat-card-title>
      <mat-card-content>
        <p>Date: {{ f.flightDate | date:'short' }}</p>
        <p>Seats: {{ f.availableSeats }}/{{ f.totalSeats }}</p>
        <p *ngIf="f.availableSeats < 5" class="warning-text">
          Hurry! Only {{ f.availableSeats }} seats left!
        </p>
      </mat-card-content>
    </mat-card>
  </div>
</div>
